<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8">

    <title>kb layout manager</title>
    <meta name="description" content="quickly create new keyboard layouts">
    <meta name="author" content="Anton Lazarev">

    <link rel="icon" href="favicon.ico" type="image/x-icon" />
</head>

<body>
    <div id="body">
    <div id="header">
        <div id="header-info">
            <div id="title">kb layout manager</div>
            <div id="source"><a target="_blank" href="https://gitlab.com/antonok/kb-layout-manager">view source on gitlab</a></div>
        </div>
        <div id="header-controls">
            <div class="option-label">layer</div>
            <select id="layer-select" v-model="current_layer">
                <option v-for="layer in layers" v-bind:value="layers.indexOf(layer)">{{ layers.indexOf(layer) + ' ' + layer }}</option>
            </select>
        </div>
    </div>
    <div id="keyboard-container">
        <div id="keyboard-spacer"></div>
        <div id="keyboard">
            <div class="keyboard-row" v-for="y in height">
                <keyboard-key :key="x + y * 14" v-for="x in width" :x="x-1" :y="y-1" :key_data="keys[y-1][x-1].data" :key_type="keys[y-1][x-1].type" :is_active="x-1 == focused_key.x && y-1 == focused_key.y" v-on:updatekey="processKeyUpdate" v-on:focuskey="updateKeyFocus"></keyboard-key>
            </div>
        </div>
        <div id="keyboard-spacer"></div>
    </div>
    <div id="bottom-controls">
        <div class="options-section">
            <div class="options-title"> layers </div>
            <input id="newlayername" v-model="newlayername" placeholder="new layer name"></input>
            <button v-on:click="renameLayer" v-bind:disabled="newlayername == ''">rename layer</button>
            <button v-on:click="addLayer" v-bind:disabled="newlayername == ''">add layer</button>
            <button v-on:click="removeLayer" v-bind:disabled="layers.length <= 1">remove layer</button>
        </div>
        <div class="options-section">
            <div class="options-title"> export </div>
            <button v-on:click="exportMaps">download layermaps.c</button>
            <button v-on:click="exportMapsServer" v-bind:disabled="!server_connected">send to server</button>
            <input type="checkbox" v-model="option_backup">backup</input>
            <input type="checkbox" v-model="option_make">make</input>
            <input type="checkbox" v-model="option_flash">flash</input>
            <input type="checkbox" v-model="option_clean">clean</input>
        </div>
        <status-popup :current_status="server_status" :error_message="server_error_message" v-on:hide_status="set_idle" v-on:cancel_flash="cancel_flash"></status-popup>
    </div>
</body>
</html>
